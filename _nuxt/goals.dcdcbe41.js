var Te=Object.defineProperty;var ke=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var H=(e,t,n)=>(ke(e,typeof t!="symbol"?t+"":t,n),n);import{_ as $e}from"./Progress.fa9f6db6.js";import Ae from"./Icon.19bfa003.js";import{a as ie,u as Le,_ as Ve}from"./useFinancial.ce7d1fb1.js";import{u as se}from"./useSupabaseClient.e20f78cf.js";import{s as Fe,x as re,F as Y,y as xe,z as he,m as E,A as oe,B as q,e as R,a as F,C as j,D as te,E as Be,G as U,w as ue,H as Me,o as B,f as K,j as O,I as J,k as L,l as G,u as P,r as ye,c as ge,t as M,i as ce,J as _e,p as Ue,K as ze,q as ee,L as He,M as Ke}from"./entry.0f0947e0.js";import{u as Ge}from"./useDateUtils.f5dea9a8.js";import"./config.377048c8.js";function A(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,A),l}var X=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(X||{}),qe=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(qe||{});function z({visible:e=!0,features:t=0,ourProps:n,theirProps:l,...o}){var a;let u=Oe(l,n),v=Object.assign(o,{props:u});if(e||t&2&&u.static)return ae(v);if(t&1){let c=(a=u.unmount)==null||a?0:1;return A(c,{[0](){return null},[1](){return ae({...o,props:{...u,hidden:!0,style:{display:"none"}}})}})}return ae(v)}function ae({props:e,attrs:t,slots:n,slot:l,name:o}){var a,u;let{as:v,...c}=de(e,["unmount","static"]),p=(a=n.default)==null?void 0:a.call(n,l),f={};if(l){let m=!1,S=[];for(let[I,g]of Object.entries(l))typeof g=="boolean"&&(m=!0),g===!0&&S.push(I);m&&(f["data-headlessui-state"]=S.join(" "))}if(v==="template"){if(p=we(p??[]),Object.keys(c).length>0||Object.keys(t).length>0){let[m,...S]=p??[];if(!Je(m)||S.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${o} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(c).concat(Object.keys(t)).map(r=>r.trim()).filter((r,i,x)=>x.indexOf(r)===i).sort((r,i)=>r.localeCompare(i)).map(r=>`  - ${r}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(r=>`  - ${r}`).join(`
`)].join(`
`));let I=Oe((u=m.props)!=null?u:{},c),g=Fe(m,I);for(let r in I)r.startsWith("on")&&(g.props||(g.props={}),g.props[r]=I[r]);return g}return Array.isArray(p)&&p.length===1?p[0]:p}return re(v,Object.assign({},c,f),{default:()=>p})}function we(e){return e.flatMap(t=>t.type===Y?we(t.children):[t])}function Oe(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let l of e)for(let o in l)o.startsWith("on")&&typeof l[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(l[o])):t[o]=l[o];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(l=>[l,void 0])));for(let l in n)Object.assign(t,{[l](o,...a){let u=n[l];for(let v of u){if(o instanceof Event&&o.defaultPrevented)return;v(o,...a)}}});return t}function We(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function de(e,t=[]){let n=Object.assign({},e);for(let l of t)l in n&&delete n[l];return n}function Je(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Ye=0;function Xe(){return++Ye}function Z(){return Xe()}var T=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(T||{});function Qe(e){throw new Error("Unexpected object: "+e)}var N=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(N||{});function Ze(e,t){let n=t.resolveItems();if(n.length<=0)return null;let l=t.resolveActiveIndex(),o=l??-1,a=(()=>{switch(e.focus){case 0:return n.findIndex(u=>!t.resolveDisabled(u));case 1:{let u=n.slice().reverse().findIndex((v,c,p)=>o!==-1&&p.length-c-1>=o?!1:!t.resolveDisabled(v));return u===-1?u:n.length-1-u}case 2:return n.findIndex((u,v)=>v<=o?!1:!t.resolveDisabled(u));case 3:{let u=n.slice().reverse().findIndex(v=>!t.resolveDisabled(v));return u===-1?u:n.length-1-u}case 4:return n.findIndex(u=>t.resolveId(u)===e.id);case 5:return null;default:Qe(e)}})();return a===-1?l:a}function D(e){var t;return e==null||e.value==null?null:(t=e.value.$el)!=null?t:e.value}let Se=Symbol("Context");var Q=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Q||{});function et(){return xe(Se,null)}function tt(e){he(Se,e)}function pe(e,t){if(e)return e;let n=t??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function ot(e,t){let n=E(pe(e.value.type,e.value.as));return oe(()=>{n.value=pe(e.value.type,e.value.as)}),q(()=>{var l;n.value||D(t)&&D(t)instanceof HTMLButtonElement&&!((l=D(t))!=null&&l.hasAttribute("type"))&&(n.value="button")}),n}var nt=Object.defineProperty,at=(e,t,n)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ve=(e,t,n)=>(at(e,typeof t!="symbol"?t+"":t,n),n);let lt=class{constructor(){ve(this,"current",this.detect()),ve(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Ie=new lt;function Ce(e){if(Ie.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=D(e);if(t)return t.ownerDocument}return document}function rt({container:e,accept:t,walk:n,enabled:l}){q(()=>{let o=e.value;if(!o||l!==void 0&&!l.value)return;let a=Ce(e);if(!a)return;let u=Object.assign(c=>t(c),{acceptNode:t}),v=a.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,u,!1);for(;v.nextNode();)n(v.currentNode)})}let fe=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ut=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(ut||{}),it=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(it||{}),st=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(st||{}),Pe=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Pe||{});function ct(e,t=0){var n;return e===((n=Ce(e))==null?void 0:n.body)?!1:A(t,{[0](){return e.matches(fe)},[1](){let l=e;for(;l!==null;){if(l.matches(fe))return!0;l=l.parentElement}return!1}})}var dt=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(dt||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function pt(e,t=n=>n){return e.slice().sort((n,l)=>{let o=t(n),a=t(l);if(o===null||a===null)return 0;let u=o.compareDocumentPosition(a);return u&Node.DOCUMENT_POSITION_FOLLOWING?-1:u&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function le(e,t,n){Ie.isServer||q(l=>{document.addEventListener(e,t,n),l(()=>document.removeEventListener(e,t,n))})}function vt(e,t,n=R(()=>!0)){function l(a,u){if(!n.value||a.defaultPrevented)return;let v=u(a);if(v===null||!v.getRootNode().contains(v))return;let c=function p(f){return typeof f=="function"?p(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e);for(let p of c){if(p===null)continue;let f=p instanceof HTMLElement?p:D(p);if(f!=null&&f.contains(v)||a.composed&&a.composedPath().includes(f))return}return!ct(v,Pe.Loose)&&v.tabIndex!==-1&&a.preventDefault(),t(a,v)}let o=E(null);le("mousedown",a=>{var u,v;n.value&&(o.value=((v=(u=a.composedPath)==null?void 0:u.call(a))==null?void 0:v[0])||a.target)},!0),le("click",a=>{o.value&&(l(a,()=>o.value),o.value=null)},!0),le("blur",a=>l(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var Re=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Re||{});let ft=F({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{let{features:l,...o}=e,a={"aria-hidden":(l&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(l&4)===4&&(l&2)!==2&&{display:"none"}}};return z({ourProps:a,theirProps:o,slot:{},attrs:n,slots:t,name:"Hidden"})}}});function Ee(e={},t=null,n=[]){for(let[l,o]of Object.entries(e))De(n,je(t,l),o);return n}function je(e,t){return e?e+"["+t+"]":t}function De(e,t,n){if(Array.isArray(n))for(let[l,o]of n.entries())De(e,je(t,l.toString()),o);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):Ee(n,t,e)}function bt(e,t,n){let l=E(n==null?void 0:n.value),o=R(()=>e.value!==void 0);return[R(()=>o.value?e.value:l.value),function(a){return o.value||(l.value=a),t==null?void 0:t(a)}]}function be(e){return[e.screenX,e.screenY]}function mt(){let e=E([-1,-1]);return{wasMoved(t){let n=be(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=be(t)}}}function xt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ht(){return/Android/gi.test(window.navigator.userAgent)}function yt(){return xt()||ht()}function gt(e,t){return e===t}var _t=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_t||{}),wt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(wt||{}),Ot=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ot||{});let Ne=Symbol("ComboboxContext");function W(e){let t=xe(Ne,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,W),n}return t}let St=F({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>gt},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:l}){let o=E(1),a=E(null),u=E(null),v=E(null),c=E(null),p=E({static:!1,hold:!1}),f=E([]),m=E(null),S=E(1),I=E(!1);function g(b=y=>y){let y=m.value!==null?f.value[m.value]:null,w=pt(b(f.value.slice()),C=>D(C.dataRef.domRef)),s=y?w.indexOf(y):null;return s===-1&&(s=null),{options:w,activeOptionIndex:s}}let r=R(()=>e.multiple?1:0),i=R(()=>e.nullable),[x,_]=bt(R(()=>e.modelValue===void 0?A(r.value,{[1]:[],[0]:void 0}):e.modelValue),b=>l("update:modelValue",b),R(()=>e.defaultValue)),d={comboboxState:o,value:x,mode:r,compare(b,y){if(typeof e.by=="string"){let w=e.by;return(b==null?void 0:b[w])===(y==null?void 0:y[w])}return e.by(b,y)},defaultValue:R(()=>e.defaultValue),nullable:i,inputRef:u,labelRef:a,buttonRef:v,optionsRef:c,disabled:R(()=>e.disabled),options:f,change(b){_(b)},activeOptionIndex:R(()=>{if(I.value&&m.value===null&&f.value.length>0){let b=f.value.findIndex(y=>!y.dataRef.disabled);if(b!==-1)return b}return m.value}),activationTrigger:S,optionsPropsRef:p,closeCombobox(){I.value=!1,!e.disabled&&o.value!==1&&(o.value=1,m.value=null)},openCombobox(){if(I.value=!0,e.disabled||o.value===0)return;let b=f.value.findIndex(y=>{let w=j(y.dataRef.value);return A(r.value,{[0]:()=>d.compare(j(d.value.value),j(w)),[1]:()=>j(d.value.value).some(s=>d.compare(j(s),j(w)))})});b!==-1&&(m.value=b),o.value=0},goToOption(b,y,w){if(I.value=!1,e.disabled||c.value&&!p.value.static&&o.value===1)return;let s=g();if(s.activeOptionIndex===null){let h=s.options.findIndex($=>!$.dataRef.disabled);h!==-1&&(s.activeOptionIndex=h)}let C=Ze(b===N.Specific?{focus:N.Specific,id:y}:{focus:b},{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});m.value=C,S.value=w??1,f.value=s.options},selectOption(b){let y=f.value.find(s=>s.id===b);if(!y)return;let{dataRef:w}=y;_(A(r.value,{[0]:()=>w.value,[1]:()=>{let s=j(d.value.value).slice(),C=j(w.value),h=s.findIndex($=>d.compare(C,j($)));return h===-1?s.push(C):s.splice(h,1),s}}))},selectActiveOption(){if(d.activeOptionIndex.value===null)return;let{dataRef:b,id:y}=f.value[d.activeOptionIndex.value];_(A(r.value,{[0]:()=>b.value,[1]:()=>{let w=j(d.value.value).slice(),s=j(b.value),C=w.findIndex(h=>d.compare(s,j(h)));return C===-1?w.push(s):w.splice(C,1),w}})),d.goToOption(N.Specific,y)},registerOption(b,y){let w={id:b,dataRef:y},s=g(C=>[...C,w]);if(m.value===null){let C=y.value.value;A(r.value,{[0]:()=>d.compare(j(d.value.value),j(C)),[1]:()=>j(d.value.value).some(h=>d.compare(j(h),j(C)))})&&(s.activeOptionIndex=s.options.indexOf(w))}f.value=s.options,m.value=s.activeOptionIndex,S.value=1},unregisterOption(b){var y;d.activeOptionIndex.value!==null&&((y=d.options.value[d.activeOptionIndex.value])==null?void 0:y.id)===b&&(I.value=!0);let w=g(s=>{let C=s.findIndex(h=>h.id===b);return C!==-1&&s.splice(C,1),s});f.value=w.options,m.value=w.activeOptionIndex,S.value=1}};vt([u,v,c],()=>d.closeCombobox(),R(()=>o.value===0)),he(Ne,d),tt(R(()=>A(o.value,{[0]:Q.Open,[1]:Q.Closed})));let V=R(()=>d.activeOptionIndex.value===null?null:f.value[d.activeOptionIndex.value].dataRef.value),k=R(()=>{var b;return(b=D(u))==null?void 0:b.closest("form")});return oe(()=>{te([k],()=>{if(!k.value||e.defaultValue===void 0)return;function b(){d.change(e.defaultValue)}return k.value.addEventListener("reset",b),()=>{var y;(y=k.value)==null||y.removeEventListener("reset",b)}},{immediate:!0})}),()=>{let{name:b,disabled:y,form:w,...s}=e,C={open:o.value===0,disabled:y,activeIndex:d.activeOptionIndex.value,activeOption:V.value,value:x.value};return re(Y,[...b!=null&&x.value!=null?Ee({[b]:x.value}).map(([h,$])=>re(ft,We({features:Re.Hidden,key:h,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:w,name:h,value:$}))):[],z({theirProps:{...n,...de(s,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:C,slots:t,attrs:n,name:"Combobox"})])}}});F({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-combobox-label-${Z()}`}},setup(e,{attrs:t,slots:n}){let l=W("ComboboxLabel");function o(){var a;(a=D(l.inputRef))==null||a.focus({preventScroll:!0})}return()=>{let a={open:l.comboboxState.value===0,disabled:l.disabled.value},{id:u,...v}=e,c={id:u,ref:l.labelRef,onClick:o};return z({ourProps:c,theirProps:v,slot:a,attrs:t,slots:n,name:"ComboboxLabel"})}}});F({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${Z()}`}},setup(e,{attrs:t,slots:n,expose:l}){let o=W("ComboboxButton");l({el:o.buttonRef,$el:o.buttonRef});function a(c){o.disabled.value||(o.comboboxState.value===0?o.closeCombobox():(c.preventDefault(),o.openCombobox()),U(()=>{var p;return(p=D(o.inputRef))==null?void 0:p.focus({preventScroll:!0})}))}function u(c){switch(c.key){case T.ArrowDown:c.preventDefault(),c.stopPropagation(),o.comboboxState.value===1&&o.openCombobox(),U(()=>{var p;return(p=o.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return;case T.ArrowUp:c.preventDefault(),c.stopPropagation(),o.comboboxState.value===1&&(o.openCombobox(),U(()=>{o.value.value||o.goToOption(N.Last)})),U(()=>{var p;return(p=o.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return;case T.Escape:if(o.comboboxState.value!==0)return;c.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&c.stopPropagation(),o.closeCombobox(),U(()=>{var p;return(p=o.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return}}let v=ot(R(()=>({as:e.as,type:t.type})),o.buttonRef);return()=>{var c,p;let f={open:o.comboboxState.value===0,disabled:o.disabled.value,value:o.value.value},{id:m,...S}=e,I={ref:o.buttonRef,id:m,type:v.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(c=D(o.optionsRef))==null?void 0:c.id,"aria-expanded":o.disabled.value?void 0:o.comboboxState.value===0,"aria-labelledby":o.labelRef.value?[(p=D(o.labelRef))==null?void 0:p.id,m].join(" "):void 0,disabled:o.disabled.value===!0?!0:void 0,onKeydown:u,onClick:a};return z({ourProps:I,theirProps:S,slot:f,attrs:t,slots:n,name:"ComboboxButton"})}}});let It=F({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${Z()}`}},emits:{change:e=>!0},setup(e,{emit:t,attrs:n,slots:l,expose:o}){let a=W("ComboboxInput"),u={value:!1};o({el:a.inputRef,$el:a.inputRef});let v=R(()=>{var r;let i=a.value.value;return D(a.inputRef)?typeof e.displayValue<"u"&&i!==void 0?(r=e.displayValue(i))!=null?r:"":typeof i=="string"?i:"":""});oe(()=>{te([v,a.comboboxState],([r,i],[x,_])=>{if(u.value)return;let d=D(a.inputRef);d&&(_===0&&i===1||r!==x)&&(d.value=r)},{immediate:!0}),te([a.comboboxState],([r],[i])=>{if(r===0&&i===1){let x=D(a.inputRef);if(!x)return;let _=x.value,{selectionStart:d,selectionEnd:V,selectionDirection:k}=x;x.value="",x.value=_,k!==null?x.setSelectionRange(d,V,k):x.setSelectionRange(d,V)}})});let c=E(!1);function p(){c.value=!0}function f(){setTimeout(()=>{c.value=!1})}function m(r){switch(u.value=!0,r.key){case T.Backspace:case T.Delete:if(a.mode.value!==0||!a.nullable.value)return;let i=r.currentTarget;requestAnimationFrame(()=>{if(i.value===""){a.change(null);let x=D(a.optionsRef);x&&(x.scrollTop=0),a.goToOption(N.Nothing)}});break;case T.Enter:if(u.value=!1,a.comboboxState.value!==0||c.value)return;if(r.preventDefault(),r.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case T.ArrowDown:return u.value=!1,r.preventDefault(),r.stopPropagation(),A(a.comboboxState.value,{[0]:()=>a.goToOption(N.Next),[1]:()=>a.openCombobox()});case T.ArrowUp:return u.value=!1,r.preventDefault(),r.stopPropagation(),A(a.comboboxState.value,{[0]:()=>a.goToOption(N.Previous),[1]:()=>{a.openCombobox(),U(()=>{a.value.value||a.goToOption(N.Last)})}});case T.Home:if(r.shiftKey)break;return u.value=!1,r.preventDefault(),r.stopPropagation(),a.goToOption(N.First);case T.PageUp:return u.value=!1,r.preventDefault(),r.stopPropagation(),a.goToOption(N.First);case T.End:if(r.shiftKey)break;return u.value=!1,r.preventDefault(),r.stopPropagation(),a.goToOption(N.Last);case T.PageDown:return u.value=!1,r.preventDefault(),r.stopPropagation(),a.goToOption(N.Last);case T.Escape:if(u.value=!1,a.comboboxState.value!==0)return;r.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&r.stopPropagation(),a.closeCombobox();break;case T.Tab:if(u.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.selectActiveOption(),a.closeCombobox();break}}function S(r){a.openCombobox(),t("change",r)}function I(){u.value=!1}let g=R(()=>{var r,i,x,_;return(_=(x=(i=e.defaultValue)!=null?i:a.defaultValue.value!==void 0?(r=e.displayValue)==null?void 0:r.call(e,a.defaultValue.value):null)!=null?x:a.defaultValue.value)!=null?_:""});return()=>{var r,i,x,_,d,V;let k={open:a.comboboxState.value===0},{id:b,displayValue:y,onChange:w,...s}=e,C={"aria-controls":(r=a.optionsRef.value)==null?void 0:r.id,"aria-expanded":a.disabled.value?void 0:a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null||(i=a.options.value[a.activeOptionIndex.value])==null?void 0:i.id,"aria-labelledby":(d=(x=D(a.labelRef))==null?void 0:x.id)!=null?d:(_=D(a.buttonRef))==null?void 0:_.id,"aria-autocomplete":"list",id:b,onCompositionstart:p,onCompositionend:f,onKeydown:m,onInput:S,onBlur:I,role:"combobox",type:(V=n.type)!=null?V:"text",tabIndex:0,ref:a.inputRef,defaultValue:g.value,disabled:a.disabled.value===!0?!0:void 0};return z({ourProps:C,theirProps:s,slot:k,attrs:n,slots:l,features:X.RenderStrategy|X.Static,name:"ComboboxInput"})}}}),Ct=F({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:t,slots:n,expose:l}){let o=W("ComboboxOptions"),a=`headlessui-combobox-options-${Z()}`;l({el:o.optionsRef,$el:o.optionsRef}),q(()=>{o.optionsPropsRef.value.static=e.static}),q(()=>{o.optionsPropsRef.value.hold=e.hold});let u=et(),v=R(()=>u!==null?(u.value&Q.Open)===Q.Open:o.comboboxState.value===0);return rt({container:R(()=>D(o.optionsRef)),enabled:R(()=>o.comboboxState.value===0),accept(c){return c.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}}),()=>{var c,p,f;let m={open:o.comboboxState.value===0},S={"aria-labelledby":(f=(c=D(o.labelRef))==null?void 0:c.id)!=null?f:(p=D(o.buttonRef))==null?void 0:p.id,id:a,ref:o.optionsRef,role:"listbox","aria-multiselectable":o.mode.value===1?!0:void 0},I=de(e,["hold"]);return z({ourProps:S,theirProps:I,slot:m,attrs:t,slots:n,features:X.RenderStrategy|X.Static,visible:v.value,name:"ComboboxOptions"})}}}),Pt=F({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:l}){let o=W("ComboboxOption"),a=`headlessui-combobox-option-${Z()}`,u=E(null);l({el:u,$el:u});let v=R(()=>o.activeOptionIndex.value!==null?o.options.value[o.activeOptionIndex.value].id===a:!1),c=R(()=>A(o.mode.value,{[0]:()=>o.compare(j(o.value.value),j(e.value)),[1]:()=>j(o.value.value).some(i=>o.compare(j(i),j(e.value)))})),p=R(()=>({disabled:e.disabled,value:e.value,domRef:u}));oe(()=>o.registerOption(a,p)),Be(()=>o.unregisterOption(a)),q(()=>{o.comboboxState.value===0&&v.value&&o.activationTrigger.value!==0&&U(()=>{var i,x;return(x=(i=D(u))==null?void 0:i.scrollIntoView)==null?void 0:x.call(i,{block:"nearest"})})});function f(i){if(e.disabled)return i.preventDefault();o.selectOption(a),o.mode.value===0&&o.closeCombobox(),yt()||requestAnimationFrame(()=>{var x;return(x=D(o.inputRef))==null?void 0:x.focus()})}function m(){if(e.disabled)return o.goToOption(N.Nothing);o.goToOption(N.Specific,a)}let S=mt();function I(i){S.update(i)}function g(i){S.wasMoved(i)&&(e.disabled||v.value||o.goToOption(N.Specific,a,0))}function r(i){S.wasMoved(i)&&(e.disabled||v.value&&(o.optionsPropsRef.value.hold||o.goToOption(N.Nothing)))}return()=>{let{disabled:i}=e,x={active:v.value,selected:c.value,disabled:i},_={id:a,ref:u,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":c.value,disabled:void 0,onClick:f,onFocus:m,onPointerenter:I,onMouseenter:I,onPointermove:g,onMousemove:g,onPointerleave:r,onMouseleave:r};return z({ourProps:_,theirProps:e,slot:x,attrs:n,slots:t,name:"ComboboxOption"})}}});const Rt={class:"flex flex-col items-center rounded-md justify-center h-fit w-1/3 bg-surface text-white"},Et={class:"w-full p-4 relative"},jt={class:"text-white flex flex-col",for:""},Dt=["value"],Nt={class:"text-white flex flex-col",for:""},Tt=["value"],kt={class:"text-white flex flex-col",for:""},$t=["value"],At=F({__name:"TheGoalForm",props:{conta:{type:String},orcamento:{type:Number},descricao:{type:String},prazo:{type:String}},emits:["update:conta","update:orcamento","update:descricao","update:prazo","submit"],async setup(e,{emit:t}){let n,l;const o=e,a=se(),{data:u}=([n,l]=ue(async()=>ie("contas",async()=>{const{data:g}=await a.from("contas").select();return g})),n=await n,l(),n),{conta:v,orcamento:c,descricao:p,prazo:f}=Me(o),m=E();te(m,()=>{var g;t("update:conta",(g=u.value)==null?void 0:g.find(r=>r.nome===m.value).id)});const S=E(""),I=R(()=>S.value===""?u:u.value.filter(g=>g.nome.toLowerCase().includes(S.value.toLowerCase())));return(g,r)=>(B(),K("div",Rt,[O("div",Et,[J(" Conta "),L(P(St),{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=i=>m.value=i)},{default:G(()=>[L(P(It),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",onChange:r[0]||(r[0]=i=>S.value=i.target.value)}),L(P(Ct),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:G(()=>[(B(!0),K(Y,null,ye(P(I),i=>(B(),ge(P(Pt),{key:i.id,value:i.nome},{default:G(()=>[J(M(i.nome),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),O("label",jt,[J(" Orçamento "),O("input",{class:"text-black",value:P(c),onInput:r[2]||(r[2]=i=>g.$emit("update:orcamento",i.target.value)),type:"number"},null,40,Dt)]),O("label",Nt,[J(" Descrição "),O("input",{class:"text-black",value:P(p),onInput:r[3]||(r[3]=i=>g.$emit("update:descricao",i.target.value)),type:"text"},null,40,Tt)]),O("div",null,[O("label",kt,[J(" Prazo "),O("input",{class:"text-black",value:P(f),onInput:r[4]||(r[4]=i=>g.$emit("update:prazo",i.target.value)),type:"date"},null,40,$t)])]),O("button",{onClick:r[5]||(r[5]=i=>g.$emit("submit")),class:"w-full pt-3"},"Criar objetivo")])]))}});const Lt={},Vt={class:"backdrop"};function Ft(e,t){return B(),K("div",Vt,[_e(e.$slots,"default",{},void 0,!0)])}const Bt=ce(Lt,[["render",Ft],["__scopeId","data-v-9dfc7e8a"]]),Mt={};function Ut(e,t){const n=Bt;return B(),ge(n,{class:"flex items-center justify-center"},{default:G(()=>[_e(e.$slots,"default")]),_:3})}const zt=ce(Mt,[["render",Ut]]),me=se();class Ht{constructor({contas:t,id:n,nome:l,orcamento:o,prazo:a}){H(this,"contas");H(this,"id");H(this,"nome");H(this,"orcamento");H(this,"prazo");console.log("contas:",t),this.contas=t,this.id=n,this.orcamento=o,this.prazo=a,this.nome=l}totalAportes(){return this.contas.map(t=>t.conta.aporte_padrao).reduce((t,n)=>t+n,0)}totalContas(){return this.contas.map(t=>t.conta.quantia).reduce((t,n)=>t+n,0)}}const Kt=async()=>{let e;e=me.channel("public:objetivos").on("postgres_changes",{event:"*",schema:"public",table:"objetivos"},()=>n()),e.subscribe();const{data:t,refresh:n}=await ie("objetivos",async()=>{const{data:l}=await me.from("objetivos").select("id, nome, prazo, orcamento, contas:conta_objetivo(conta(id, nome, aporte_padrao, quantia))");return l});return{objetivos:t,Goal:Ht}},ne=e=>(He("data-v-5556dd23"),e=e(),Ke(),e),Gt={class:"w-full bg-base text-white"},qt={class:"flex gap-6"},Wt={class:"max-w-[20%]"},Jt={class:"card__title !mb-0"},Yt={class:"mb-4"},Xt=ne(()=>O("span",{class:"text-sm text-white mb-4"},"Progresso",-1)),Qt={class:"flex gap-2 flex-col pt-4"},Zt={class:"flex justify-between"},eo={class:"flex items-center gap-2"},to=ne(()=>O("p",null,"Prazo",-1)),oo={class:"flex justify-between"},no={class:"flex items-center gap-2"},ao=ne(()=>O("p",null,"Saldo atual",-1)),lo={class:"flex justify-between"},ro={class:"flex items-center gap-2"},uo=ne(()=>O("p",null,"Montante previsto",-1)),io=F({__name:"goals",async setup(e){let t,n;const{monthsBetweenDates:l}=Ge(),o=se(),{currency:a,calcularMontanteComposto:u,somaParcelas:v}=Le(),{objetivos:c,Goal:p}=([t,n]=ue(()=>Kt()),t=await t,n(),t),f=E(""),m=E(""),S=E(""),I=E(0),g=E(!1);async function r(_){await o.from("objetivos").insert(_),g.value=!1}const i=_=>_.investimento*Math.pow(1+_.taxa/100,l(new Date(_.data_inicio),new Date(_.data_fim)))/l(new Date(_.data_inicio),new Date(_.data_fim)),{data:x}=([t,n]=ue(async()=>ie("compras",async()=>{let{data:_}=await o.from("compras").select("*");return _==null||_.forEach(d=>{d.aporte=i(d)}),_})),t=await t,n(),t);return(_,d)=>{const V=$e,k=Ae,b=Ve,y=At,w=zt;return B(),K(Y,null,[O("div",Gt,[O("button",{onClick:d[0]||(d[0]=s=>g.value=!0)},"Novo objetivo"),O("div",qt,[(B(!0),K(Y,null,ye(P(c),s=>(B(),K("div",Wt,[L(b,{class:"p-6"},{default:G(()=>{var C;return[O("h1",Jt,M(s.nome),1),O("h3",Yt,M(s.nome),1),Xt,L(V,{progress:s.contas.map(h=>h.conta.quantia).reduce((h,$)=>h+$,0)/s.orcamento*100},null,8,["progress"]),O("div",Qt,[O("div",Zt,[O("div",eo,[L(k,{name:"material-symbols:calendar-today"}),to]),O("p",null,M(new Date(s.prazo).toLocaleDateString("pt-br",{month:"short",day:"numeric",year:"numeric"}).split(" ").filter(h=>h!="de").join(" ")),1)]),O("div",oo,[O("div",no,[L(k,{name:"material-symbols:account-balance-wallet"}),ao]),O("p",null,M(P(a)(new P(p)(s).totalContas())),1)]),O("div",lo,[O("div",ro,[L(k,{name:"ic:baseline-attach-money"}),uo]),O("p",null,M(P(v)(s.contas)),1),O("p",null,M(P(a)(P(u)(s.contas.map(h=>h.conta.quantia).reduce((h,$)=>h+$,0),(C=P(x))==null?void 0:C.filter(h=>s.contas.map(({conta:$})=>$.id).includes(h.conta)).map(h=>h.aporte).reduce((h,$)=>h+$,0),(new Date(s.prazo)-new Date)/(1e3*60*60*24*365)))),1)])])]}),_:2},1024)]))),256))])]),Ue(L(w,null,{default:G(()=>[L(y,{orcamento:P(I),"onUpdate:orcamento":d[1]||(d[1]=s=>ee(I)?I.value=s:null),descricao:P(m),"onUpdate:descricao":d[2]||(d[2]=s=>ee(m)?m.value=s:null),prazo:P(S),"onUpdate:prazo":d[3]||(d[3]=s=>ee(S)?S.value=s:null),conta:P(f),"onUpdate:conta":d[4]||(d[4]=s=>ee(f)?f.value=s:null),onSubmit:d[5]||(d[5]=s=>r({nome:P(m),prazo:P(S),orcamento:P(I),conta:P(f)}))},null,8,["orcamento","descricao","prazo","conta"])]),_:1},512),[[ze,P(g)]])],64)}}});const yo=ce(io,[["__scopeId","data-v-5556dd23"]]);export{yo as default};
