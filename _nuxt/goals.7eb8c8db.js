var Te=Object.defineProperty;var ke=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var H=(e,t,n)=>(ke(e,typeof t!="symbol"?t+"":t,n),n);import{_ as $e}from"./Progress.fe6954ef.js";import Ae from"./Icon.24db4939.js";import{a as ie,u as Le,_ as Ve}from"./useFinancial.83164e42.js";import{u as se,a as Fe}from"./purchases.65892832.js";import{s as Be,x as re,F as Y,y as xe,z as he,m as E,A as oe,B as q,e as P,a as V,C as j,D as te,E as Me,G as U,w as ue,H as Ue,o as F,f as K,j as S,I as J,k as A,l as G,u as R,r as ye,c as ge,t as M,i as ce,J as _e,p as ze,K as He,q as ee,L as Ke,M as Ge}from"./entry.68909b65.js";import{u as qe}from"./useDateUtils.9a0d88f3.js";import"./config.37bd9903.js";function $(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,$),r}var X=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(X||{}),We=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(We||{});function z({visible:e=!0,features:t=0,ourProps:n,theirProps:r,...o}){var a;let u=Oe(r,n),v=Object.assign(o,{props:u});if(e||t&2&&u.static)return ae(v);if(t&1){let c=(a=u.unmount)==null||a?0:1;return $(c,{[0](){return null},[1](){return ae({...o,props:{...u,hidden:!0,style:{display:"none"}}})}})}return ae(v)}function ae({props:e,attrs:t,slots:n,slot:r,name:o}){var a,u;let{as:v,...c}=de(e,["unmount","static"]),p=(a=n.default)==null?void 0:a.call(n,r),b={};if(r){let x=!1,I=[];for(let[C,y]of Object.entries(r))typeof y=="boolean"&&(x=!0),y===!0&&I.push(C);x&&(b["data-headlessui-state"]=I.join(" "))}if(v==="template"){if(p=we(p??[]),Object.keys(c).length>0||Object.keys(t).length>0){let[x,...I]=p??[];if(!Ye(x)||I.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${o} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(c).concat(Object.keys(t)).map(l=>l.trim()).filter((l,i,h)=>h.indexOf(l)===i).sort((l,i)=>l.localeCompare(i)).map(l=>`  - ${l}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(l=>`  - ${l}`).join(`
`)].join(`
`));let C=Oe((u=x.props)!=null?u:{},c),y=Be(x,C);for(let l in C)l.startsWith("on")&&(y.props||(y.props={}),y.props[l]=C[l]);return y}return Array.isArray(p)&&p.length===1?p[0]:p}return re(v,Object.assign({},c,b),{default:()=>p})}function we(e){return e.flatMap(t=>t.type===Y?we(t.children):[t])}function Oe(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](o,...a){let u=n[r];for(let v of u){if(o instanceof Event&&o.defaultPrevented)return;v(o,...a)}}});return t}function Je(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function de(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Ye(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Xe=0;function Qe(){return++Xe}function Z(){return Qe()}var T=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(T||{});function Ze(e){throw new Error("Unexpected object: "+e)}var N=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(N||{});function et(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),o=r??-1,a=(()=>{switch(e.focus){case 0:return n.findIndex(u=>!t.resolveDisabled(u));case 1:{let u=n.slice().reverse().findIndex((v,c,p)=>o!==-1&&p.length-c-1>=o?!1:!t.resolveDisabled(v));return u===-1?u:n.length-1-u}case 2:return n.findIndex((u,v)=>v<=o?!1:!t.resolveDisabled(u));case 3:{let u=n.slice().reverse().findIndex(v=>!t.resolveDisabled(v));return u===-1?u:n.length-1-u}case 4:return n.findIndex(u=>t.resolveId(u)===e.id);case 5:return null;default:Ze(e)}})();return a===-1?r:a}function D(e){var t;return e==null||e.value==null?null:(t=e.value.$el)!=null?t:e.value}let Se=Symbol("Context");var Q=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Q||{});function tt(){return xe(Se,null)}function ot(e){he(Se,e)}function pe(e,t){if(e)return e;let n=t??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function nt(e,t){let n=E(pe(e.value.type,e.value.as));return oe(()=>{n.value=pe(e.value.type,e.value.as)}),q(()=>{var r;n.value||D(t)&&D(t)instanceof HTMLButtonElement&&!((r=D(t))!=null&&r.hasAttribute("type"))&&(n.value="button")}),n}var at=Object.defineProperty,lt=(e,t,n)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ve=(e,t,n)=>(lt(e,typeof t!="symbol"?t+"":t,n),n);let rt=class{constructor(){ve(this,"current",this.detect()),ve(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Ie=new rt;function Ce(e){if(Ie.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=D(e);if(t)return t.ownerDocument}return document}function ut({container:e,accept:t,walk:n,enabled:r}){q(()=>{let o=e.value;if(!o||r!==void 0&&!r.value)return;let a=Ce(e);if(!a)return;let u=Object.assign(c=>t(c),{acceptNode:t}),v=a.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,u,!1);for(;v.nextNode();)n(v.currentNode)})}let fe=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var it=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(it||{}),st=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(st||{}),ct=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(ct||{}),Pe=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Pe||{});function dt(e,t=0){var n;return e===((n=Ce(e))==null?void 0:n.body)?!1:$(t,{[0](){return e.matches(fe)},[1](){let r=e;for(;r!==null;){if(r.matches(fe))return!0;r=r.parentElement}return!1}})}var pt=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(pt||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function vt(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),a=t(r);if(o===null||a===null)return 0;let u=o.compareDocumentPosition(a);return u&Node.DOCUMENT_POSITION_FOLLOWING?-1:u&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function le(e,t,n){Ie.isServer||q(r=>{document.addEventListener(e,t,n),r(()=>document.removeEventListener(e,t,n))})}function ft(e,t,n=P(()=>!0)){function r(a,u){if(!n.value||a.defaultPrevented)return;let v=u(a);if(v===null||!v.getRootNode().contains(v))return;let c=function p(b){return typeof b=="function"?p(b()):Array.isArray(b)||b instanceof Set?b:[b]}(e);for(let p of c){if(p===null)continue;let b=p instanceof HTMLElement?p:D(p);if(b!=null&&b.contains(v)||a.composed&&a.composedPath().includes(b))return}return!dt(v,Pe.Loose)&&v.tabIndex!==-1&&a.preventDefault(),t(a,v)}let o=E(null);le("mousedown",a=>{var u,v;n.value&&(o.value=((v=(u=a.composedPath)==null?void 0:u.call(a))==null?void 0:v[0])||a.target)},!0),le("click",a=>{o.value&&(r(a,()=>o.value),o.value=null)},!0),le("blur",a=>r(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var Re=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Re||{});let bt=V({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{let{features:r,...o}=e,a={"aria-hidden":(r&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return z({ourProps:a,theirProps:o,slot:{},attrs:n,slots:t,name:"Hidden"})}}});function Ee(e={},t=null,n=[]){for(let[r,o]of Object.entries(e))De(n,je(t,r),o);return n}function je(e,t){return e?e+"["+t+"]":t}function De(e,t,n){if(Array.isArray(n))for(let[r,o]of n.entries())De(e,je(t,r.toString()),o);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):Ee(n,t,e)}function mt(e,t,n){let r=E(n==null?void 0:n.value),o=P(()=>e.value!==void 0);return[P(()=>o.value?e.value:r.value),function(a){return o.value||(r.value=a),t==null?void 0:t(a)}]}function be(e){return[e.screenX,e.screenY]}function xt(){let e=E([-1,-1]);return{wasMoved(t){let n=be(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=be(t)}}}function ht(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function yt(){return/Android/gi.test(window.navigator.userAgent)}function gt(){return ht()||yt()}function _t(e,t){return e===t}var wt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(wt||{}),Ot=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Ot||{}),St=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(St||{});let Ne=Symbol("ComboboxContext");function W(e){let t=xe(Ne,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,W),n}return t}let It=V({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>_t},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:r}){let o=E(1),a=E(null),u=E(null),v=E(null),c=E(null),p=E({static:!1,hold:!1}),b=E([]),x=E(null),I=E(1),C=E(!1);function y(f=g=>g){let g=x.value!==null?b.value[x.value]:null,O=vt(f(b.value.slice()),m=>D(m.dataRef.domRef)),s=g?O.indexOf(g):null;return s===-1&&(s=null),{options:O,activeOptionIndex:s}}let l=P(()=>e.multiple?1:0),i=P(()=>e.nullable),[h,w]=mt(P(()=>e.modelValue===void 0?$(l.value,{[1]:[],[0]:void 0}):e.modelValue),f=>r("update:modelValue",f),P(()=>e.defaultValue)),d={comboboxState:o,value:h,mode:l,compare(f,g){if(typeof e.by=="string"){let O=e.by;return(f==null?void 0:f[O])===(g==null?void 0:g[O])}return e.by(f,g)},defaultValue:P(()=>e.defaultValue),nullable:i,inputRef:u,labelRef:a,buttonRef:v,optionsRef:c,disabled:P(()=>e.disabled),options:b,change(f){w(f)},activeOptionIndex:P(()=>{if(C.value&&x.value===null&&b.value.length>0){let f=b.value.findIndex(g=>!g.dataRef.disabled);if(f!==-1)return f}return x.value}),activationTrigger:I,optionsPropsRef:p,closeCombobox(){C.value=!1,!e.disabled&&o.value!==1&&(o.value=1,x.value=null)},openCombobox(){if(C.value=!0,e.disabled||o.value===0)return;let f=b.value.findIndex(g=>{let O=j(g.dataRef.value);return $(l.value,{[0]:()=>d.compare(j(d.value.value),j(O)),[1]:()=>j(d.value.value).some(s=>d.compare(j(s),j(O)))})});f!==-1&&(x.value=f),o.value=0},goToOption(f,g,O){if(C.value=!1,e.disabled||c.value&&!p.value.static&&o.value===1)return;let s=y();if(s.activeOptionIndex===null){let _=s.options.findIndex(B=>!B.dataRef.disabled);_!==-1&&(s.activeOptionIndex=_)}let m=et(f===N.Specific?{focus:N.Specific,id:g}:{focus:f},{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:_=>_.id,resolveDisabled:_=>_.dataRef.disabled});x.value=m,I.value=O??1,b.value=s.options},selectOption(f){let g=b.value.find(s=>s.id===f);if(!g)return;let{dataRef:O}=g;w($(l.value,{[0]:()=>O.value,[1]:()=>{let s=j(d.value.value).slice(),m=j(O.value),_=s.findIndex(B=>d.compare(m,j(B)));return _===-1?s.push(m):s.splice(_,1),s}}))},selectActiveOption(){if(d.activeOptionIndex.value===null)return;let{dataRef:f,id:g}=b.value[d.activeOptionIndex.value];w($(l.value,{[0]:()=>f.value,[1]:()=>{let O=j(d.value.value).slice(),s=j(f.value),m=O.findIndex(_=>d.compare(s,j(_)));return m===-1?O.push(s):O.splice(m,1),O}})),d.goToOption(N.Specific,g)},registerOption(f,g){let O={id:f,dataRef:g},s=y(m=>[...m,O]);if(x.value===null){let m=g.value.value;$(l.value,{[0]:()=>d.compare(j(d.value.value),j(m)),[1]:()=>j(d.value.value).some(_=>d.compare(j(_),j(m)))})&&(s.activeOptionIndex=s.options.indexOf(O))}b.value=s.options,x.value=s.activeOptionIndex,I.value=1},unregisterOption(f){var g;d.activeOptionIndex.value!==null&&((g=d.options.value[d.activeOptionIndex.value])==null?void 0:g.id)===f&&(C.value=!0);let O=y(s=>{let m=s.findIndex(_=>_.id===f);return m!==-1&&s.splice(m,1),s});b.value=O.options,x.value=O.activeOptionIndex,I.value=1}};ft([u,v,c],()=>d.closeCombobox(),P(()=>o.value===0)),he(Ne,d),ot(P(()=>$(o.value,{[0]:Q.Open,[1]:Q.Closed})));let L=P(()=>d.activeOptionIndex.value===null?null:b.value[d.activeOptionIndex.value].dataRef.value),k=P(()=>{var f;return(f=D(u))==null?void 0:f.closest("form")});return oe(()=>{te([k],()=>{if(!k.value||e.defaultValue===void 0)return;function f(){d.change(e.defaultValue)}return k.value.addEventListener("reset",f),()=>{var g;(g=k.value)==null||g.removeEventListener("reset",f)}},{immediate:!0})}),()=>{let{name:f,disabled:g,form:O,...s}=e,m={open:o.value===0,disabled:g,activeIndex:d.activeOptionIndex.value,activeOption:L.value,value:h.value};return re(Y,[...f!=null&&h.value!=null?Ee({[f]:h.value}).map(([_,B])=>re(bt,Je({features:Re.Hidden,key:_,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,name:_,value:B}))):[],z({theirProps:{...n,...de(s,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:m,slots:t,attrs:n,name:"Combobox"})])}}});V({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-combobox-label-${Z()}`}},setup(e,{attrs:t,slots:n}){let r=W("ComboboxLabel");function o(){var a;(a=D(r.inputRef))==null||a.focus({preventScroll:!0})}return()=>{let a={open:r.comboboxState.value===0,disabled:r.disabled.value},{id:u,...v}=e,c={id:u,ref:r.labelRef,onClick:o};return z({ourProps:c,theirProps:v,slot:a,attrs:t,slots:n,name:"ComboboxLabel"})}}});V({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${Z()}`}},setup(e,{attrs:t,slots:n,expose:r}){let o=W("ComboboxButton");r({el:o.buttonRef,$el:o.buttonRef});function a(c){o.disabled.value||(o.comboboxState.value===0?o.closeCombobox():(c.preventDefault(),o.openCombobox()),U(()=>{var p;return(p=D(o.inputRef))==null?void 0:p.focus({preventScroll:!0})}))}function u(c){switch(c.key){case T.ArrowDown:c.preventDefault(),c.stopPropagation(),o.comboboxState.value===1&&o.openCombobox(),U(()=>{var p;return(p=o.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return;case T.ArrowUp:c.preventDefault(),c.stopPropagation(),o.comboboxState.value===1&&(o.openCombobox(),U(()=>{o.value.value||o.goToOption(N.Last)})),U(()=>{var p;return(p=o.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return;case T.Escape:if(o.comboboxState.value!==0)return;c.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&c.stopPropagation(),o.closeCombobox(),U(()=>{var p;return(p=o.inputRef.value)==null?void 0:p.focus({preventScroll:!0})});return}}let v=nt(P(()=>({as:e.as,type:t.type})),o.buttonRef);return()=>{var c,p;let b={open:o.comboboxState.value===0,disabled:o.disabled.value,value:o.value.value},{id:x,...I}=e,C={ref:o.buttonRef,id:x,type:v.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(c=D(o.optionsRef))==null?void 0:c.id,"aria-expanded":o.disabled.value?void 0:o.comboboxState.value===0,"aria-labelledby":o.labelRef.value?[(p=D(o.labelRef))==null?void 0:p.id,x].join(" "):void 0,disabled:o.disabled.value===!0?!0:void 0,onKeydown:u,onClick:a};return z({ourProps:C,theirProps:I,slot:b,attrs:t,slots:n,name:"ComboboxButton"})}}});let Ct=V({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${Z()}`}},emits:{change:e=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:o}){let a=W("ComboboxInput"),u={value:!1};o({el:a.inputRef,$el:a.inputRef});let v=P(()=>{var l;let i=a.value.value;return D(a.inputRef)?typeof e.displayValue<"u"&&i!==void 0?(l=e.displayValue(i))!=null?l:"":typeof i=="string"?i:"":""});oe(()=>{te([v,a.comboboxState],([l,i],[h,w])=>{if(u.value)return;let d=D(a.inputRef);d&&(w===0&&i===1||l!==h)&&(d.value=l)},{immediate:!0}),te([a.comboboxState],([l],[i])=>{if(l===0&&i===1){let h=D(a.inputRef);if(!h)return;let w=h.value,{selectionStart:d,selectionEnd:L,selectionDirection:k}=h;h.value="",h.value=w,k!==null?h.setSelectionRange(d,L,k):h.setSelectionRange(d,L)}})});let c=E(!1);function p(){c.value=!0}function b(){setTimeout(()=>{c.value=!1})}function x(l){switch(u.value=!0,l.key){case T.Backspace:case T.Delete:if(a.mode.value!==0||!a.nullable.value)return;let i=l.currentTarget;requestAnimationFrame(()=>{if(i.value===""){a.change(null);let h=D(a.optionsRef);h&&(h.scrollTop=0),a.goToOption(N.Nothing)}});break;case T.Enter:if(u.value=!1,a.comboboxState.value!==0||c.value)return;if(l.preventDefault(),l.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case T.ArrowDown:return u.value=!1,l.preventDefault(),l.stopPropagation(),$(a.comboboxState.value,{[0]:()=>a.goToOption(N.Next),[1]:()=>a.openCombobox()});case T.ArrowUp:return u.value=!1,l.preventDefault(),l.stopPropagation(),$(a.comboboxState.value,{[0]:()=>a.goToOption(N.Previous),[1]:()=>{a.openCombobox(),U(()=>{a.value.value||a.goToOption(N.Last)})}});case T.Home:if(l.shiftKey)break;return u.value=!1,l.preventDefault(),l.stopPropagation(),a.goToOption(N.First);case T.PageUp:return u.value=!1,l.preventDefault(),l.stopPropagation(),a.goToOption(N.First);case T.End:if(l.shiftKey)break;return u.value=!1,l.preventDefault(),l.stopPropagation(),a.goToOption(N.Last);case T.PageDown:return u.value=!1,l.preventDefault(),l.stopPropagation(),a.goToOption(N.Last);case T.Escape:if(u.value=!1,a.comboboxState.value!==0)return;l.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&l.stopPropagation(),a.closeCombobox();break;case T.Tab:if(u.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.selectActiveOption(),a.closeCombobox();break}}function I(l){a.openCombobox(),t("change",l)}function C(){u.value=!1}let y=P(()=>{var l,i,h,w;return(w=(h=(i=e.defaultValue)!=null?i:a.defaultValue.value!==void 0?(l=e.displayValue)==null?void 0:l.call(e,a.defaultValue.value):null)!=null?h:a.defaultValue.value)!=null?w:""});return()=>{var l,i,h,w,d,L;let k={open:a.comboboxState.value===0},{id:f,displayValue:g,onChange:O,...s}=e,m={"aria-controls":(l=a.optionsRef.value)==null?void 0:l.id,"aria-expanded":a.disabled.value?void 0:a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null||(i=a.options.value[a.activeOptionIndex.value])==null?void 0:i.id,"aria-labelledby":(d=(h=D(a.labelRef))==null?void 0:h.id)!=null?d:(w=D(a.buttonRef))==null?void 0:w.id,"aria-autocomplete":"list",id:f,onCompositionstart:p,onCompositionend:b,onKeydown:x,onInput:I,onBlur:C,role:"combobox",type:(L=n.type)!=null?L:"text",tabIndex:0,ref:a.inputRef,defaultValue:y.value,disabled:a.disabled.value===!0?!0:void 0};return z({ourProps:m,theirProps:s,slot:k,attrs:n,slots:r,features:X.RenderStrategy|X.Static,name:"ComboboxInput"})}}}),Pt=V({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:t,slots:n,expose:r}){let o=W("ComboboxOptions"),a=`headlessui-combobox-options-${Z()}`;r({el:o.optionsRef,$el:o.optionsRef}),q(()=>{o.optionsPropsRef.value.static=e.static}),q(()=>{o.optionsPropsRef.value.hold=e.hold});let u=tt(),v=P(()=>u!==null?(u.value&Q.Open)===Q.Open:o.comboboxState.value===0);return ut({container:P(()=>D(o.optionsRef)),enabled:P(()=>o.comboboxState.value===0),accept(c){return c.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}}),()=>{var c,p,b;let x={open:o.comboboxState.value===0},I={"aria-labelledby":(b=(c=D(o.labelRef))==null?void 0:c.id)!=null?b:(p=D(o.buttonRef))==null?void 0:p.id,id:a,ref:o.optionsRef,role:"listbox","aria-multiselectable":o.mode.value===1?!0:void 0},C=de(e,["hold"]);return z({ourProps:I,theirProps:C,slot:x,attrs:t,slots:n,features:X.RenderStrategy|X.Static,visible:v.value,name:"ComboboxOptions"})}}}),Rt=V({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:r}){let o=W("ComboboxOption"),a=`headlessui-combobox-option-${Z()}`,u=E(null);r({el:u,$el:u});let v=P(()=>o.activeOptionIndex.value!==null?o.options.value[o.activeOptionIndex.value].id===a:!1),c=P(()=>$(o.mode.value,{[0]:()=>o.compare(j(o.value.value),j(e.value)),[1]:()=>j(o.value.value).some(i=>o.compare(j(i),j(e.value)))})),p=P(()=>({disabled:e.disabled,value:e.value,domRef:u}));oe(()=>o.registerOption(a,p)),Me(()=>o.unregisterOption(a)),q(()=>{o.comboboxState.value===0&&v.value&&o.activationTrigger.value!==0&&U(()=>{var i,h;return(h=(i=D(u))==null?void 0:i.scrollIntoView)==null?void 0:h.call(i,{block:"nearest"})})});function b(i){if(e.disabled)return i.preventDefault();o.selectOption(a),o.mode.value===0&&o.closeCombobox(),gt()||requestAnimationFrame(()=>{var h;return(h=D(o.inputRef))==null?void 0:h.focus()})}function x(){if(e.disabled)return o.goToOption(N.Nothing);o.goToOption(N.Specific,a)}let I=xt();function C(i){I.update(i)}function y(i){I.wasMoved(i)&&(e.disabled||v.value||o.goToOption(N.Specific,a,0))}function l(i){I.wasMoved(i)&&(e.disabled||v.value&&(o.optionsPropsRef.value.hold||o.goToOption(N.Nothing)))}return()=>{let{disabled:i}=e,h={active:v.value,selected:c.value,disabled:i},w={id:a,ref:u,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":c.value,disabled:void 0,onClick:b,onFocus:x,onPointerenter:C,onMouseenter:C,onPointermove:y,onMousemove:y,onPointerleave:l,onMouseleave:l};return z({ourProps:w,theirProps:e,slot:h,attrs:n,slots:t,name:"ComboboxOption"})}}});const Et={class:"flex flex-col items-center rounded-md justify-center h-fit w-1/3 bg-surface text-white"},jt={class:"w-full p-4 relative"},Dt={class:"text-white flex flex-col",for:""},Nt=["value"],Tt={class:"text-white flex flex-col",for:""},kt=["value"],$t={class:"text-white flex flex-col",for:""},At=["value"],Lt=V({__name:"TheGoalForm",props:{conta:{type:String},orcamento:{type:Number},descricao:{type:String},prazo:{type:String}},emits:["update:conta","update:orcamento","update:descricao","update:prazo","submit"],async setup(e,{emit:t}){let n,r;const o=e,a=se(),{data:u}=([n,r]=ue(async()=>ie("contas",async()=>{const{data:y}=await a.from("contas").select();return y})),n=await n,r(),n),{conta:v,orcamento:c,descricao:p,prazo:b}=Ue(o),x=E();te(x,()=>{var y;t("update:conta",(y=u.value)==null?void 0:y.find(l=>l.nome===x.value).id)});const I=E(""),C=P(()=>I.value===""?u:u.value.filter(y=>y.nome.toLowerCase().includes(I.value.toLowerCase())));return(y,l)=>(F(),K("div",Et,[S("div",jt,[J(" Conta "),A(R(It),{modelValue:x.value,"onUpdate:modelValue":l[1]||(l[1]=i=>x.value=i)},{default:G(()=>[A(R(Ct),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",onChange:l[0]||(l[0]=i=>I.value=i.target.value)}),A(R(Pt),{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:G(()=>[(F(!0),K(Y,null,ye(R(C),i=>(F(),ge(R(Rt),{key:i.id,value:i.nome},{default:G(()=>[J(M(i.nome),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),S("label",Dt,[J(" Orçamento "),S("input",{class:"text-black",value:R(c),onInput:l[2]||(l[2]=i=>y.$emit("update:orcamento",i.target.value)),type:"number"},null,40,Nt)]),S("label",Tt,[J(" Descrição "),S("input",{class:"text-black",value:R(p),onInput:l[3]||(l[3]=i=>y.$emit("update:descricao",i.target.value)),type:"text"},null,40,kt)]),S("div",null,[S("label",$t,[J(" Prazo "),S("input",{class:"text-black",value:R(b),onInput:l[4]||(l[4]=i=>y.$emit("update:prazo",i.target.value)),type:"date"},null,40,At)])]),S("button",{onClick:l[5]||(l[5]=i=>y.$emit("submit")),class:"w-full pt-3"},"Criar objetivo")])]))}});const Vt={},Ft={class:"backdrop"};function Bt(e,t){return F(),K("div",Ft,[_e(e.$slots,"default",{},void 0,!0)])}const Mt=ce(Vt,[["render",Bt],["__scopeId","data-v-9dfc7e8a"]]),Ut={};function zt(e,t){const n=Mt;return F(),ge(n,{class:"flex items-center justify-center"},{default:G(()=>[_e(e.$slots,"default")]),_:3})}const Ht=ce(Ut,[["render",zt]]),me=se();class Kt{constructor({contas:t,id:n,nome:r,orcamento:o,prazo:a}){H(this,"contas");H(this,"id");H(this,"nome");H(this,"orcamento");H(this,"prazo");console.log("contas:",t),this.contas=t,this.id=n,this.orcamento=o,this.prazo=a,this.nome=r}totalAportes(){return this.contas.map(t=>t.conta.aporte_padrao).reduce((t,n)=>t+n,0)}totalContas(){return this.contas.map(t=>t.conta.quantia).reduce((t,n)=>t+n,0)}}const Gt=async()=>{let e;e=me.channel("public:objetivos").on("postgres_changes",{event:"*",schema:"public",table:"objetivos"},()=>n()),e.subscribe();const{data:t,refresh:n}=await ie("objetivos",async()=>{const{data:r}=await me.from("objetivos").select("id, nome, prazo, orcamento, contas:conta_objetivo(conta(id, nome, aporte_padrao, quantia, compras(*)))");return r});return{objetivos:t,Goal:Kt}},ne=e=>(Ke("data-v-235824b5"),e=e(),Ge(),e),qt={class:"w-full bg-base text-white"},Wt={class:"flex gap-6"},Jt={class:"max-w-[20%]"},Yt={class:"card__title !mb-0"},Xt={class:"mb-4"},Qt=ne(()=>S("span",{class:"text-sm text-white mb-4"},"Progresso",-1)),Zt={class:"flex gap-2 flex-col pt-4"},eo={class:"flex justify-between"},to={class:"flex items-center gap-2"},oo=ne(()=>S("p",null,"Prazo",-1)),no={class:"flex justify-between"},ao={class:"flex items-center gap-2"},lo=ne(()=>S("p",null,"Saldo atual",-1)),ro={class:"flex justify-between"},uo={class:"flex items-center gap-2"},io=ne(()=>S("p",null,"Montante previsto",-1)),so=V({__name:"goals",async setup(e){let t,n;const{calculaParcela:r}=Fe(),{monthsBetweenDates:o}=qe(),a=se(),{currency:u,calcularMontanteComposto:v,somaParcelas:c}=Le(),{objetivos:p,Goal:b}=([t,n]=ue(()=>Gt()),t=await t,n(),t),x=E(""),I=E(""),C=E(""),y=E(0),l=E(!1);async function i(w){await a.from("objetivos").insert(w),l.value=!1}const h=w=>w.investimento*Math.pow(1+w.taxa/100,o(new Date(w.data_inicio),new Date(w.data_fim)))/o(new Date(w.data_inicio),new Date(w.data_fim));return[t,n]=ue(async()=>ie("compras",async()=>{let{data:w}=await a.from("compras").select("*");return w==null||w.forEach(d=>{d.aporte=h(d)}),w})),t=await t,n(),(w,d)=>{const L=$e,k=Ae,f=Ve,g=Lt,O=Ht;return F(),K(Y,null,[S("div",qt,[S("button",{onClick:d[0]||(d[0]=s=>l.value=!0)},"Novo objetivo"),S("div",Wt,[(F(!0),K(Y,null,ye(R(p),s=>(F(),K("div",Jt,[A(f,{class:"p-6"},{default:G(()=>[S("h1",Yt,M(s.nome),1),S("h3",Xt,M(s.nome),1),Qt,A(L,{progress:s.contas.map(m=>m.conta.quantia).reduce((m,_)=>m+_,0)/s.orcamento*100},null,8,["progress"]),S("div",Zt,[S("div",eo,[S("div",to,[A(k,{name:"material-symbols:calendar-today"}),oo]),S("p",null,M(new Date(s.prazo).toLocaleDateString("pt-br",{month:"short",day:"numeric",year:"numeric"}).split(" ").filter(m=>m!="de").join(" ")),1)]),S("div",no,[S("div",ao,[A(k,{name:"material-symbols:account-balance-wallet"}),lo]),S("p",null,M(R(u)(new R(b)(s).totalContas())),1)]),S("div",ro,[S("div",uo,[A(k,{name:"ic:baseline-attach-money"}),io]),S("p",null,M(R(u)(R(v)(s.contas.map(m=>m.conta.quantia).reduce((m,_)=>m+_,0),s.contas.map(m=>m.conta.aporte_padrao).reduce((m,_)=>m+_,0)+s.contas.map(m=>m.conta.compras.map(_=>R(r)({investimento:_.investimento,data_fim:_.data_fim,data_inicio:_.data_inicio,taxa:_.taxa})).reduce((_,B)=>_+B,0)).reduce((m,_)=>m+_,0),(new Date(s.prazo)-new Date)/(1e3*60*60*24*365)))),1),S("p",null,M(),1)])])]),_:2},1024)]))),256))])]),ze(A(O,null,{default:G(()=>[A(g,{orcamento:R(y),"onUpdate:orcamento":d[1]||(d[1]=s=>ee(y)?y.value=s:null),descricao:R(I),"onUpdate:descricao":d[2]||(d[2]=s=>ee(I)?I.value=s:null),prazo:R(C),"onUpdate:prazo":d[3]||(d[3]=s=>ee(C)?C.value=s:null),conta:R(x),"onUpdate:conta":d[4]||(d[4]=s=>ee(x)?x.value=s:null),onSubmit:d[5]||(d[5]=s=>i({nome:R(I),prazo:R(C),orcamento:R(y),conta:R(x)}))},null,8,["orcamento","descricao","prazo","conta"])]),_:1},512),[[He,R(l)]])],64)}}});const go=ce(so,[["__scopeId","data-v-235824b5"]]);export{go as default};
