import{u as k,a as j,_ as A}from"./useFinancial.ce7d1fb1.js";import{u as C}from"./useSupabaseClient.e20f78cf.js";import{w as F,e as S,f as p,j as s,F as h,r as w,u as e,k as q,l as m,o as r,c as y,t as o}from"./entry.0f0947e0.js";import{u as D}from"./purchases.21408b47.js";import"./useDateUtils.f5dea9a8.js";const N={class:"bg-base w-full flex overflow-y-auto pb-4 justify-evenly"},P={class:"grid grid-cols-2 gap-4"},T={class:"card__title"},V={class:"flex justify-center flex-col items-center text-white"},E={class:"text-2xl font-bold"},L=s("p",{class:"text-sm"},"Total",-1),R={class:"text-sm"},z={class:"text-sm"},G={class:"flex gap-2 h-fit flex-col"},H=s("span",{class:"card__title"},"Total",-1),I={class:"text-2xl font-bold"},J={class:"card__title"},K={class:"text-2xl font-bold"},Y={__name:"accounts",async setup(M){let i,f;const{calculaParcela:v}=D(),{currency:_}=k(),b=C(),{data:u}=([i,f]=F(async()=>j("contas",async()=>{const{data:a}=await b.from("contas").select("*, recursos ( id, nome ), compras (investimento, data_inicio, data_fim, taxa)");return a})),i=await i,f(),i),x=S(()=>[...new Set(u.value.map(a=>a.recursos.nome))].map(a=>({recurso:a,total:u.value.filter(c=>c.recursos.nome===a).map(c=>c.quantia).reduce((c,n)=>c+n,0)})));return(a,c)=>{const n=A;return r(),p("div",N,[s("div",P,[(r(!0),p(h,null,w(e(u),t=>(r(),y(n,{class:"w-full h-fit p-2"},{default:m(()=>[s("span",T,o(t.nome),1),s("div",V,[s("span",E,o(e(_)(t.quantia)),1),L,s("p",R,o(t.recursos.nome),1),s("p",z,"Aporte mensal de: "+o(e(_)(t.compras.map(({investimento:l,data_inicio:d,data_fim:g,taxa:B})=>e(v)({investimento:l,data_inicio:d,data_fim:g,taxa:B})).reduce((l,d)=>l+d,0)+t.aporte_padrao)),1)])]),_:2},1024))),256))]),s("div",G,[q(n,{class:"flex flex-col text-white p-2"},{default:m(()=>[H,s("span",I,o(e(_)(e(x).map(t=>t.total).reduce((t,l)=>t+l,0))),1)]),_:1}),(r(!0),p(h,null,w(e(x),t=>(r(),y(n,{class:"flex flex-col text-white p-2"},{default:m(()=>[s("span",J,o(t.recurso),1),s("span",K,o(e(_)(t.total)),1)]),_:2},1024))),256))])])}}};export{Y as default};
